# from my code

## ë…¸íŠ¸ë¶ ì„ ì • ëª©ì 

url : https://www.kaggle.com/code/anubhavgoyal10/airline-passenger-satisfaction-knn

ëª©ì  : ì´ë¡ ìœ¼ë¡œ ë°°ìš´ **KNNì˜ ì‹¤ì œ í™œìš© ì‚¬ë¡€** í•™ìŠµ

>### K-Nearest Neighbor ì´ë¡ 
>1. **ì•„ì´ë””ì–´** : ì˜¤ë¦¬ì²˜ëŸ¼ ê±·ê³ , ì˜¤ë¦¬ì²˜ëŸ¼ ìš¸ë©´ ì˜¤ë¦¬ë¡œ ì—¬ê¸°ê² ë‹¤. 
>
>-> **ë¼ë²¨ì´ ì—†ëŠ” ë°ì´í„°ì—ê²Œ ê°€ì¥ ê°€ê¹Œìš´(ê°€ì¥ ìœ ì‚¬í•œ) ë°ì´í„°ì˜ ë¼ë²¨ì„ ë¶€ì—¬**í•œë‹¤.
>
>2. *ë‹¤ìŒì„ í•„ìš”ë¡œ í•œë‹¤.*
>
>     âœ”ï¸ ë¼ë²¨ì´ ìˆëŠ” ë°ì´í„°ì…‹
>
>     âœ”ï¸ ë‘ ë ˆì½”ë“œ(ë°ì´í„°ì˜ í•œ í–‰) ê°„ì˜ ê±°ë¦¬/ìœ ì‚¬ë„ë¥¼ ìˆ˜ì¹˜í™”í•˜ëŠ” ê¸°ì¤€ ë° ì¸¡ì •ë°©ì‹
>
>       - ê±°ë¦¬ ë©”íŠ¸ë¦­ ì˜ˆì‹œ
>
>      | Metric      | ì„¤ëª…                           |
>      |-------------|--------------------------------|
>      | Euclidean   | ì¼ë°˜ì ì¸ ì§ì„  ê±°ë¦¬              |
>      | Manhattan   | ì§ê° ê±°ë¦¬ (ê²©ì ê¸°ë°˜)           |
>      | Cosine      | ê°ë„ ê¸°ë°˜ ìœ ì‚¬ë„ (ë°©í–¥ ìœ„ì£¼)    |
>
>
>     âœ”ï¸ í•˜ì´í¼íŒŒë¼ë¯¸í„° K : ì£¼ë³€ ëª‡ ê°œì˜ ë°ì´í„°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨í• ì§€ ê²°ì • 
>
>     âœ”ï¸ ìƒˆë¡œìš´(ë¼ë²¨ì´ ì—†ëŠ”) ë°ì´í„°ë¥¼ ë¶„ë¥˜í•  ìˆ˜ ìˆëŠ” íŒë‹¨ ê¸°ì¤€
>
>3. K ê°’ ê³ ë¥´ê¸°
>   - ë„ˆë¬´ ì‘ìœ¼ë©´ -> ë…¸ì´ì¦ˆì— ë¯¼ê°, **ê³¼ì í•©** ê°€ëŠ¥
>   - ë„ˆë¬´ í¬ë©´ -> ê°™ì€ í´ë˜ìŠ¤ë¡œ ë¶„ë¥˜ë˜ë©´ ì•ˆë˜ëŠ” ë°ì´í„°ë¥¼ ë¬¶ìŒ(**ê³¼ì†Œì í•©**)
>
```
âš ï¸ ì£¼ì˜ì‚¬í•­

ë°ì´í„° ë³€ìˆ˜ë§ˆë‹¤ ìŠ¤ì¼€ì¼(ê°’ì˜ ë²”ìœ„)ì´ ë‹¤ë¥¼ ê²½ìš°, ê±°ë¦¬ ê³„ì‚° ì‹œ íŠ¹ì • ë³€ìˆ˜ì—ë§Œ ê³¼ë„í•œ ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŒ
=> ë”°ë¼ì„œ ë°ì´í„°ì…‹ì— ë”°ë¼ ìŠ¤ì¼€ì¼ë§(Standardization) í•„ìš”

ğŸ” StandardScaler : í‰ê·  0, í‘œì¤€í¸ì°¨ 1ë¡œ ë³€í™˜
ğŸ” MinMaxScaler : 0~1 ë²”ìœ„ë¡œ ë³€í™˜
```

### K Nearest Neighbors ì‹¤ì œ í™œìš©
```python
knn = KNeighborsClassifier(n_neighbors=i)
score = cross_val_score(knn, X_train, y_train, cv=5, scoring = ' ')
' '.append(score.mean())
```

![confusion matrix](https://github.com/Luna-luv/Kaggle_Study/blob/main/airplane%20passenger%20satisfaction/image.png?raw=true)

scoring ì˜ ì¢…ë¥˜
| scoring ì´ë¦„               | ì˜ë¯¸                                                        |
|----------------------------|-------------------------------------------------------------|
| `accuracy`               | ì •í™•ë„ (ì „ì²´ ì •ë‹µ ë¹„ìœ¨) = **(TP+TN)/(TP+FN+FP+TN)**              |
| `precision`              | ì •ë°€ë„ (Pë¡œ ì˜ˆì¸¡í•œ ê²ƒ ì¤‘ ì‹¤ì œ P ë¹„ìœ¨) = **TP/(TP+FP)**        |
| `recall`                 | ì¬í˜„ìœ¨ (ì‹¤ì œ P ì¤‘ ë§íŒ ë¹„ìœ¨) = **TP/(TP+FN)**                        |
| `f1`                     | F1 ì ìˆ˜ (precisionê³¼ recallì˜ ì¡°í™” í‰ê· ) = **2/Precision+2/Recall**        |
| `roc_auc`                | ROC AUC (ì´ì§„ ë¶„ë¥˜ í™•ë¥  ê¸°ë°˜ í‰ê°€ì§€í‘œ)                      |
| `neg_log_loss`          | ë¡œê·¸ ì†ì‹¤ (ì‘ì„ìˆ˜ë¡ ì¢‹ìŒ, ê°’ì€ ìŒìˆ˜ë¡œ ë‚˜ì˜´)                |
| `neg_mean_squared_error`| íšŒê·€ìš©: í‰ê·  ì œê³± ì˜¤ì°¨ (ì‘ì„ìˆ˜ë¡ ì¢‹ìŒ, ê°’ì€ ìŒìˆ˜ë¡œ ë‚˜ì˜´)    |

*How specific the model is in not detecting fire when there is no fire*
- Type 1 error = FP Rate(1-specificity) = FP/(FP+TN)

*How sensitive the model is working in detecting fire when there is fire*
- Type 2 error = FN Rate(1-sensitivity=1-recall) = FN/(TP+FN)

---

## inplace = True
ê¸°ëŠ¥ : ì›ë³¸ ë°ì´í„°ì— ìˆ˜ì •ì‚¬í•­ ë°”ë¡œ ë®ì–´ì“°ê¸° í•  ìˆ˜ ìˆìŒ

>**ì‚¬ìš© ê°€ëŠ¥**í•œ ìƒí™©
- ì›ë³¸ ë°ì´í„° ì „ì²´ë¥¼ ìˆ˜ì •í•  ê²½ìš°
- ì›ë³¸ ë°ì´í„°ì˜ í•œ í–‰/ì—´ì— ëŒ€í•´ì„œë§Œ ìˆ˜ì •ì‚¬í•­ ë°˜ì˜í•  ê²½ìš°

>**ì‚¬ìš© ë¶ˆê°€ëŠ¥**í•œ ìƒí™©
- ì›ë³¸ ë°ì´í„°ì—ì„œ ëª‡ ê°œì˜ í–‰/ì—´ì„ ë½‘ì•„ ìˆ˜ì •í•  ê²½ìš°

---

# from members' code

## object vs category vs mapping
| í•­ëª©              | object                           | category                                | mapping (ì˜ˆ: `.map({'A':0, ...})`)      |
|-------------------|-----------------------------------|------------------------------------------|------------------------------------------|
| ì˜ë¯¸/ìš©ë„         | ì¼ë°˜ ë¬¸ìì—´ íƒ€ì…                  | ë²”ì£¼í˜• ë°ì´í„° ì „ìš© íƒ€ì…                  | ê°’ì„ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì§ì ‘ ì¹˜í™˜              |
| ë‚´ë¶€ í‘œí˜„         | ë¬¸ìì—´ ê·¸ëŒ€ë¡œ ì €ì¥                | ì •ìˆ˜ ì¸ì½”ë”© + ë²”ì£¼ ì¸ë±ìŠ¤ í…Œì´ë¸”         | ì¹˜í™˜ëœ ê°’ (ex. ë¬¸ìì—´ â†’ ìˆ«ì)           |
| ê°’ ë³€ê²½ ì—¬ë¶€      | âŒ ê·¸ëŒ€ë¡œ ìœ ì§€                   | âŒ ê·¸ëŒ€ë¡œ ìœ ì§€                           | âœ… ê°’ ìì²´ ë³€ê²½                           |
| ë©”ëª¨ë¦¬ íš¨ìœ¨       | âŒ ë‚®ìŒ                           | âœ… ë†’ìŒ (ë©”ëª¨ë¦¬ ì ˆì•½, ì†ë„ ë¹ ë¦„)         | âš ï¸ ì›ë˜ íƒ€ì… ìœ ì§€ (íš¨ìœ¨ì„± ì°¨ì´ëŠ” ì—†ìŒ)  |
| ë¬¸ìì—´ ì²˜ë¦¬ ê°€ëŠ¥  | âœ… ììœ ë¡­ê²Œ `.str.upper()` ë“±     | âš ï¸ ì¼ë¶€ë§Œ ê°€ëŠ¥ or ì œí•œë¨                 | âœ… ë°”ê¾¼ ê°’ì´ ë¬¸ìì—´ì´ë©´ ê°€ëŠ¥              |
| ëŒ€í‘œ ì‚¬ìš© ëª©ì     | í…ìŠ¤íŠ¸ ì²˜ë¦¬, ì‹œê°í™”              | ë²”ì£¼í˜• ì¸ì½”ë”©, ê·¸ë£¹í™”, ë¶„ì„ìš© ìµœì í™”     | ë¨¸ì‹ ëŸ¬ë‹ìš© ìˆ«ì ë³€í™˜ ë“±                   |
| ìˆ«ì ëª¨ë¸ ì…ë ¥ìš©  | âŒ ë¹„íš¨ìœ¨ì                       | âœ… `.cat.codes`ë¡œ ë³€í™˜ ê°€ëŠ¥              | âœ… ë³´í†µ ìˆ«ìë¡œ ì¹˜í™˜ë˜ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥ |
| ìˆœì„œ ë¶€ì—¬ ê°€ëŠ¥    | âŒ ë¶ˆê°€                           | âœ… `ordered=True` ê°€ëŠ¥                   | âŒ ìˆ˜ë™ìœ¼ë¡œ í•´ì¤˜ì•¼ í•¨                    |
| ì˜ˆì‹œ              | `'Male'`, `'Female'`              | `'Male'`, `'Female'` (ë‚´ë¶€ 0/1)          | `'Male'` â†’ `0`, `'Female'` â†’ `1`         |

=> ê°’ì„ ë‹¤ë£¨ëŠ” **ìœ ì—°í•¨(ììœ ë„)** : mapping > object > category

---

## ìƒì‚¼ê°í–‰ë ¬ì„ ì“°ëŠ” ì´ìœ 
- ì¤‘ë³µ ì œê±°
- ì‹œê°í™” ê°„ì†Œí™”
- ë¶ˆí•„ìš”í•œ ì •ë³´ ê°ì¶¤(ìƒ, í•˜ ì™„ì „íˆ ì¼ì¹˜í•˜ë‹ˆ)
- í‘œ/ë¦¬í¬íŠ¸ ì‘ì„±ì‹œ íš¨ìœ¨ì 
```
ê·¸ëŸ¼ ë‚œ íˆíŠ¸ë§µ ì‹œê°í™”í•  ë•Œ ìƒì‚¼ê° ì´ìš©í•´ì„œ ë´ì•¼ê² ë‹¤~!
```
```python
# ê¸°ì¡´ìƒê´€í–‰ë ¬ ì‹œê°í™” ì˜ˆì‹œ
sns.heatmap(corr_matrix, mask=mask)

# ìƒì‚¼ê°í–‰ë ¬ ì‹œê°í™” ì˜ˆì‹œ(lowë¥¼ ê°€ë ¤ì„œ upperë§Œ ë‚¨ê¸°ê¸°)
mask=np.tril(np.ones_like(corr, dtype=bool))
```
![ìƒì‚¼ê°í–‰ë ¬ íˆíŠ¸ë§µ](https://github.com/Luna-luv/Kaggle_Study/blob/main/airplane%20passenger%20satisfaction/image-1.png?raw=true)

---

## `multiple = stack` vs `stack()`

| í•­ëª©            | `multiple='stack'`                      | `stack()` í•¨ìˆ˜                               |
|-----------------|------------------------------------------|---------------------------------------------|
| ì†í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ | `seaborn.histplot()` ì˜µì…˜               | `pandas.DataFrame` ë©”ì„œë“œ                   |
| ì—­í•             | ê·¸ë£¹ë³„ ë§‰ëŒ€ë¥¼ **ìœ„ë¡œ ìŒ“ì•„ íˆìŠ¤í† ê·¸ë¨ í‘œí˜„** | ì—´ì„ ì¸ë±ìŠ¤ë¡œ ìŒ“ì•„ **DataFrame â†’ Series ë³€í™˜** |
| ì‹œê°í™” ê´€ë ¨?    | ê·¸ë˜í”„ì— ì‚¬ìš©ë¨                       | ë°ì´í„° êµ¬ì¡° ë³€ê²½ìš©                        |
| ìš©ë„       | **ê·¸ë˜í”„ ë§‰ëŒ€ ëˆ„ì **                    | **í…Œì´ë¸” êµ¬ì¡° ë³€ê²½**                         |

### `multiple = stack` í™œìš© ì˜ˆì‹œ
```python
sns.histplot(data, x = 'Age', hue = 'Class', multiple = 'stack', palette = 'YlOrBr', edgecolor = '.3', linewidth  = .5, ax = ax[1])
```
![histplot ëˆ„ì ](https://github.com/Luna-luv/Kaggle_Study/blob/main/airplane%20passenger%20satisfaction/image-4.png?raw=true)

---

## One-Hot Encoding
- ë²”ì£¼í˜• ë³€ìˆ˜ë¥¼ ìˆ˜ì¹˜í˜• ë²¡í„°ë¡œ ë³€í™˜í•˜ëŠ” ì¸ì½”ë”© ë°©ì‹
- ì¥ì  : MLì—ì„œ ë²”ì£¼í˜• ë°ì´í„°ë¥¼ ìˆ«ìë¡œ ë³€í™˜ ê°€ëŠ¥, ìˆœì„œ/ìš°ì—´ ì •ë³´ê°€ ì—†ëŠ” ë²”ì£¼í˜• ë°ì´í„° ì²˜ë¦¬ì— ì í•©
- ë‹¨ì  : ì¹¼ëŸ¼ ìˆ˜ì˜ ì¦ê°€(ê³ ì°¨ì›)

| êµ¬ë¶„           | ì´ì§„ ë²”ì£¼í˜• ë³€ìˆ˜                            | ë‹¤ì¤‘ ë²”ì£¼í˜• ë³€ìˆ˜                             |
|----------------|---------------------------------------------|----------------------------------------------|
| ê³ ìœ ê°’ ê°œìˆ˜    | 2ê°œ                                          | 3ê°œ ì´ìƒ                                     |
| ê¸°ë³¸ ì¸ì½”ë”©    | í•˜ë‚˜ì˜ ì—´ë¡œ `0` ë˜ëŠ” `1`ë¡œ ì²˜ë¦¬ ê°€ëŠ¥       | ìˆ«ìë¡œ ì¸ì½”ë”©í•˜ë©´ ì„œì—´ ì˜¤í•´ ìœ„í—˜ ìˆìŒ      |
| ì²˜ë¦¬ ë°©ë²•      | `LabelEncoder` ë˜ëŠ” `astype('category')`     | `pd.get_dummies()` ë˜ëŠ” `OneHotEncoder()`    |
| ì›í•« ì¸ì½”ë”© í•„ìš” ì—¬ë¶€ | ë³´í†µ í•„ìš” ì—†ìŒ                         | í•„ìš”í•¨                                    |
| ì˜ˆì¸¡ ëª¨ë¸ ì…ë ¥ ì‹œ | ë°”ë¡œ ì…ë ¥ ê°€ëŠ¥                             | ì›í•« ë²¡í„°ë¡œ ë³€í™˜ í›„ ì…ë ¥ í•„ìš”                |

---

## ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ í™œìš©
`def` ë¥¼ ì´ìš©í•´ í•¨ìˆ˜ë¥¼ ì •ì˜í•  ìˆ˜ ìˆëŠ”ë°, ì´ë¥¼ í†µí•´ data explorationì„ í•œë²ˆì— í•´ì£¼ëŠ” í•¨ìˆ˜ë„ ì •ì˜í•  ìˆ˜ ìˆìŒ
```python
def data_explore(df):
    print("DATA EXPLORATION")
    print("*" * 70)
    print("Shape of dataset : ", df.shape)
    print("*" * 70)
    print(df.info())
    print("*" * 70)
    print("STATISTICAL ANALYSIS OF NUMERICAL DATA")
    print("*" * 70)
    print(df.describe())
    print("*" * 70)
    print("STATISTICAL ANALYSIS OF CATEGORICAL DATA")
    print("*" * 70)
    print(df.describe(include='object'))
    print("*" * 70)
    print("MISSING VALUES")
    print("*" * 70)
    print(df.isnull().sum())
    print("*" * 70)
    print("MISSING VALUES IN %")
    print("*" * 70)
    print(df.isnull().mean() * 100)
    print("*" * 70)

```
### ê²°ê³¼ ì˜ˆì‹œ

![ì‚¬ìš©ìì •ì˜í•¨ìˆ˜ì˜ í™œìš©](https://github.com/Luna-luv/Kaggle_Study/blob/main/airplane%20passenger%20satisfaction/image-6.png?raw=true)

```
í•œ ë²ˆì— ë¹„êµí•˜ê¸° í¸í• ë“¯ í•˜ë‹¤! ë‚˜ë„ ì¨ë¨¹ì–´ì•¼ì§€
```

---

## xerr
```python
sns.barplot("CorssValMeans","Algorithm", data=cv_res, palette="Set3", orient="h", **{'xerr':cv_std})
```
xerr ì˜ ê¸°ëŠ¥ : ë§‰ëŒ€ì— ì˜¤ì°¨ë§‰ëŒ€ í¬í•¨

### ê·¸ë˜í”„ ì˜ˆì‹œ

![ì˜¤ì°¨í¬í•¨ë§‰ëŒ€ê·¸ë˜í”„](https://github.com/Luna-luv/Kaggle_Study/blob/main/airplane%20passenger%20satisfaction/image-7.png?raw=true)

- ë§‰ëŒ€ ê·¸ë˜í”„ ë ê²€ì€ ë¶€ë¶„ì´ ì˜¤ì°¨ ë²”ìœ„ í‘œì‹œí•œ ê²ƒì„

---

# í•œì¤„ ë‹¤ì§
```
ì½”ë“œì— ì§‘ì¤‘í•˜ëŠ” ê²ƒë„ ì¢‹ì§€ë§Œ ì „ë°˜ì ì¸ íë¦„ë„ ì´í•´í•˜ê³  ì˜ë¬¸ì„ ê°€ì§€ë©´ì„œ í•  ê²ƒ!
ì´ë²ˆ ë¶„ì„ì—ëŠ” ë°ì´í„° ì…‹ì˜ ì„¤ëª… ë¨¼ì € ë³¸ í›„ í•„ì‚¬ë¥¼ ì‹œì‘í•˜ì...
```